FROM maven:3.6.3-jdk-8
ARG GIT_REPO
ARG GIT_REPO_LAST_PATH
ARG MAIN_CLASS
ENV GIT_REPO $GIT_REPO
ENV GIT_REPO_LAST_PATH $GIT_REPO_LAST_PATH
ENV MAIN_CLASS $MAIN_CLASS


ENV PORT 6000

RUN git clone $GIT_REPO

WORKDIR $GIT_REPO_LAST_PATH

RUN mvn compile

RUN mvn clean package

CMD java -cp target/classes:target/dependency/* $MAIN_CLASS




